params.trimmomatic = "/ifs/data/nfs_share/ikmb_repository/software/trimmomatic/0.36"

filter_folder = "/ifs/data/nfs_share/ikmb_repository/references/bloomfilters/outbreak-monitoring"
params.bloomfiler = "$filter_folder/Acinetobacter_baumannii.bf $filter_folder/Enterococcus_faecalis_V583.bf $filter_folder/Staphylococcus_aureus_NCTC8325.bf $filter_folder/Streptococcus_pneumoniae_R6.bf $filter_folder/Escherichia_coli_K12.bf $filter_folder/Klebsiella_pneumoniae.bf $filter_folder/Pseudomonas_aeruginosa_PAO1.bf $filter_folder/Enterobacter_cloacae.bf $filter_folder/Enterobacter_aerogenes.bf $filter_folder/Enterococcus_faecium.bf""

params.outdir = "output"

params.pathoscope_index_dir="/ifs/data/nfs_share/ikmb_repository/databases/Pathoscope/2015-06"
params.pathoscope="/ifs/data/nfs_share/ikmb_repository/software/pathoscope/2.0.6/pathoscope/pathoscope2.py"

// Trimmomatic configuration variables
params.leading = 3
params.trailing = 3
params.slidingwindow = "4:15"
params.minlen = 75
params.adapters = "NexteraPE-PE.fa"

executor {

	name = "slurm"
	queueSize="50"

}

process {
	
	executor='slurm'
	queue='ikmb_a'
   	cpus = 1
   	memory = { 8.GB * task.attempt }
   	time = { 2.h * task.attempt }
   	clusterOptions = { "--qos=ikmb_a" }
   	errorStrategy = { task.exitStatus == 143 ? 'retry' : 'finish' }
   	maxRetries = 3
   	maxErrors = '-1'
	
	$Fastqc {
		module = [ "Java/1.8.0", "Fastqc/0.11.3" ]

	}
	
	$runMultiQCFastq {
		module = [ 'Python/2.7.10' ]
	}

	$Trimmomatic {
		module = [ 'Java/1.8.0' ]
		cpus = 8
	}

	$Bloomfilter {
		module = [ 'BioBloom/2.0.13' ]
		cpus = 4
		
	}

	$resultBiobloom {
		module = [ 'Ruby/2.2.2' ]
	}

	$runPathoscopeMap {
		module = [ 'Python/2.7.10', 'Samtools/0.1.19', 'Bowtie2/2.2.3', 'Pathoscope/2.0.6' ]
		cpus = 8
	}

	 $runPathoscopeId {
                module = [ 'Python/2.7.10', 'Samtools/0.1.19', 'Bowtie2/2.2.3', 'Pathoscope/2.0.6' ]
        }

}
